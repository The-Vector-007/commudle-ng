<div class="user-videos-container">
  <div #screenShareDiv *ngIf="screenShareTrack" class="user-screen-share">
    <!-- TODO: Support audio in screen share -->
    <video
      [autoplay]="true"
      [height]="screenShareDiv.clientHeight"
      [muted]="true"
      [srcObject]="screenShareTrack.stream.nativeStream"
    ></video>
  </div>
  <div class="user-videos">
    <ng-container *ngFor="let peer of peers">
      <div
        *ngIf="peer.role?.name === EHmsRoles.HOST || peer.role?.name === EHmsRoles.GUEST"
        [ngClass]="{'screen': screenShareTrack}"
        class="user-video"
      >
        <div *ngIf="!peer.isLocal && peer.role?.name === EHmsRoles.HOST" class="admin-video-controls d-flex">
          <button
            (click)="peer.audioTrack?.getVolume() === 0 ? onAudioUnmute(peer) : onAudioMute(peer)"
            ghost
            nbButton
            nbTooltip="Mute this person"
            shape="round"
            size="small"
          >
            <nb-icon [icon]="peer.audioTrack?.getVolume() === 0 ? 'mic-off' : 'mic'"></nb-icon>
          </button>
          <button ghost nbButton nbTooltip="Remove from stage" shape="round" size="small">
            <nb-icon icon="minus-circle"></nb-icon>
          </button>
        </div>
        <div class="video-stream">
          <!-- If the video is enabled, show it -->
          <video
            *ngIf="peer.videoTrack?.enabled"
            [autoplay]="true"
            [muted]="peer.isLocal"
            [srcObject]="peer.videoTrack?.stream.nativeStream"
          ></video>
          <!-- TODO: If the video is disabled, show profile pic -->
          <div *ngIf="!peer.videoTrack?.enabled"></div>
        </div>
        <div class="user">
          <nb-icon
            [icon]="peer.audioTrack?.enabled ? 'mic' : 'mic-off'"
            [status]="peer.audioTrack?.enabled ? '' : 'danger'"
          ></nb-icon>
          &nbsp;{{peer.name}}
        </div>
      </div>
    </ng-container>
  </div>
</div>
